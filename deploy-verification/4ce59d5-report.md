# Deploy Verification Report — commit 4ce59d5

Service: srv-d5067vumcj7s73e3ubjg
Deploy id: dep-d53tsdre5dus73b5tsu0
Commit: 4ce59d5 — test(startup): stabilize Redis marker and log assertions
Status: live

---

## Health endpoint
- URL: https://betrix-ui-k8jh.onrender.com/health/rapidapi
- HTTP: 200 OK
- Key payload:
  - `unified.liveMatches`: 0
  - `unified.upcomingFixtures`: 101
  - `unified.providers`: {"SportMonks": {"live":0,"upcoming":121}, "Odds (The Odds API)": {"live":0,"upcoming":0}}
  - `unified.sports.soccer`: { live: 0, upcoming: 101 }

---

## Redis verification
Redis URL: from `.env.local.fixed` (rediss://red-d4op3l49c44c73flgmbg:...@frankfurt-keyvalue.render.com:6379)

Keys confirmed (scan run during verification):

- `rapidapi:startup:registered`
  - type: string
  - value: "registered"
  - ttl: 86364 s (≈ 24 hours)

- `rapidapi:startup:srv-d5067vumcj7s73e3ubjg`
  - type: string
  - value: "registered"
  - ttl: 86364 s (≈ 24 hours)

> Note: runtime exposed the service id; server wrote deploy-specific key on startup.

### Fixture keys (integrity)
- `rapidapi:fixtures:providers` — JSON mapping providers → counts (SportMonks upcoming: 121)
- `rapidapi:fixtures:live:total` — "0"
- `rapidapi:fixtures:upcoming:total` — "101"
- `rapidapi:fixtures:live:soccer` — "0"
- `rapidapi:fixtures:upcoming:soccer` — "101"
- `rapidapi:fixtures:list` — present; contains ~100 upcoming fixtures (large JSON array)

---

## Commands / checks used
- Deployed via Render API: POST /v1/services/srv-d5067vumcj7s73e3ubjg/deploys → returned `dep-d53tsdre5dus73b5tsu0`.
- Polled deploy status until `live`.
- Health check: `curl https://betrix-ui-k8jh.onrender.com/health/rapidapi`
- Redis scan: `node scripts/redis-scan.cjs <REDIS_URL>` (used `.env.local.fixed`)

---

## Conclusion
- Deploy `dep-d53tsdre5dus73b5tsu0` (commit `4ce59d5`) is live.
- Health endpoint returns expected aggregated `unified` data; `unified.sports.soccer` shows live=0, upcoming=101.
- Redis contains both global and deploy-specific startup markers with TTL ≈ 86400s and value "registered".
- Fixture keys are intact.

## Recommended next actions
- Optionally repeat validation for service `srv-d506bbre5dus73asfsu0` and append results here.
- Open PR including this report and request a reviewer to merge.
- Use Render dashboard or API to roll back or promote the deployment if needed.

---

Generated by automation on 2025-12-21
